<main
    id="example--main"
    class="group flex justify-center flex-wrap items-center gap-2 place-content-center"
>
    <div
        class="group-[[data-show-example]]:contents not-group-[[data-show-example]]:hidden"
    >
        <div>
            <h2 class="text-center group-[[data-uses-hooks=true]]:hidden">
                Actual
            </h2>
            <canvas
                width="1024"
                height="1024"
                class="h-[40vh] max-w-[40vh] max-h-[40vh] group-[[data-uses-hooks=true]]:h-[80vh] group-[[data-uses-hooks=true]]:max-h-[80vh] group-[[data-uses-hooks=true]]:max-w-[80vh]"
                id="canvas"></canvas>
        </div>
        <div class="group-[[data-uses-hooks=true]]:hidden">
            <h2 class="text-center">Ground Truth</h2>
            <canvas
                width="1024"
                height="1024"
                class="h-[40vh] max-w-[40vh] max-h-[40vh]"
                id="ground-truth-canvas"
            >
            </canvas>
        </div>
    </div>
    <p
        class="group-[[data-show-example]]:hidden not-group-[[data-show-example]]:block"
    >
        Choose an example from the list ðŸ’œ
    </p>
</main>

<script>
    import { examples } from "../../examples/index.ts";
    import { getCurrentExampleFromUrl, runExample } from "./example-runner.ts";

    function runCurrentExample() {
        const exampleMainEl = document.getElementById(
            "example--main",
        ) as HTMLDivElement;
        const exampleKey = getCurrentExampleFromUrl();
        if (!exampleKey) {
            delete exampleMainEl.dataset.showExample;
            return;
        }
        const example = examples[exampleKey];
        exampleMainEl.dataset.showExample = "true";
        exampleMainEl.dataset.usesHooks = example.meta.usesHooks
            ? "true"
            : "false";
        runExample(example);
    }

    // Listening to when the current URL changes
    window.addEventListener("hashchange", runCurrentExample);
    runCurrentExample();
</script>
